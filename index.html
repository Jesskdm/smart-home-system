<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Dispositivos Inteligentes - Smart Home</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üè† Sistema de Control Remoto</h1>
                <div class="header-status">
                    <span id="connection-status" class="status disconnected">Desconectado</span>
                    <span id="user-info" class="user-info">Conectando...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Section: Luces Inteligentes -->
            <section class="device-section">
                <h2 class="section-title">üí° Luces Inteligentes</h2>
                <div class="devices-grid" id="lights-grid">
                    <div class="device-card loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </section>

            <!-- Section: Cerraduras Inteligentes -->
            <section class="device-section">
                <h2 class="section-title">üîí Cerraduras Inteligentes</h2>
                <div class="devices-grid" id="locks-grid">
                    <div class="device-card loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </section>

            <!-- Section: Termostatos -->
            <section class="device-section">
                <h2 class="section-title">üå°Ô∏è Termostatos</h2>
                <div class="devices-grid" id="thermostats-grid">
                    <div class="device-card loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </section>

            <!-- Section: Sensores de Movimiento -->
            <section class="device-section">
                <h2 class="section-title">üì° Sensores de Movimiento</h2>
                <div class="devices-grid" id="motion-sensors-grid">
                    <div class="device-card loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </section>

            <!-- Section: C√°maras de Seguridad -->
            <section class="device-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h2 class="section-title" style="margin-bottom: 0; border-bottom: none;">üìπ C√°maras de Seguridad</h2>
                    <button class="btn btn-primary" onclick="openCameraSetupModal()">+ Agregar C√°mara</button>
                </div>
                <div class="devices-grid" id="cameras-grid">
                    <div class="device-card loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para configurar c√°maras H-VIEW -->
    <div id="camera-setup-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Configurar C√°mara H-VIEW</h2>
            <p>Ingresa los datos de tu c√°mara IP H-VIEW para conectarla</p>
            
            <form id="camera-setup-form" onsubmit="handleCameraSetup(event)">
                <div class="form-group">
                    <label>Nombre de la C√°mara</label>
                    <input type="text" id="camera-name" placeholder="Ej: C√°mara Entrada" required>
                </div>

                <div class="form-group">
                    <label>Ubicaci√≥n</label>
                    <input type="text" id="camera-location" placeholder="Ej: Entrada, Garage, etc." required>
                </div>

                <div class="form-group">
                    <label>URL de la C√°mara</label>
                    <input type="text" id="camera-url" placeholder="Ej: http://192.168.1.100:8080" required>
                    <small style="color: var(--text-secondary); margin-top: 5px; display: block;">
                        Usa http://IP:PUERTO o rtsp://usuario:contrase√±a@IP:554/stream1
                    </small>
                </div>

                <div class="form-group">
                    <label>Usuario (opcional)</label>
                    <input type="text" id="camera-username" placeholder="admin">
                </div>

                <div class="form-group">
                    <label>Contrase√±a (opcional)</label>
                    <input type="password" id="camera-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>

                <div class="form-group">
                    <label>Tipo de C√°mara</label>
                    <select id="camera-type" required style="width: 100%; padding: 10px; border: 1px solid var(--border); background-color: var(--surface-light); color: var(--text-primary); border-radius: 8px;">
                        <option value="ip">C√°mara IP (HTTP/RTSP)</option>
                        <option value="rtsp">RTSP Stream</option>
                        <option value="mjpeg">MJPEG Stream</option>
                    </select>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="submit" class="btn btn-success" style="flex: 1;">Guardar C√°mara</button>
                    <button type="button" class="btn btn-secondary" onclick="closeCameraSetupModal()" style="flex: 1;">Cancelar</button>
                </div>
            </form>

            <!-- Gu√≠a R√°pida H-VIEW dentro del modal -->
            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border); background-color: var(--surface-light); padding: 15px; border-radius: 8px;">
                <h3 style="color: var(--text-primary); margin-bottom: 10px;">Gu√≠a R√°pida H-VIEW</h3>
                <ul style="color: var(--text-secondary); font-size: 0.85rem; line-height: 1.8; padding-left: 20px;">
                    <li><strong>IP por defecto:</strong> 192.168.1.64 (var√≠a seg√∫n tu red)</li>
                    <li><strong>Puerto HTTP:</strong> 8080 o 8081</li>
                    <li><strong>Puerto RTSP:</strong> 554</li>
                    <li><strong>Usuario/Pass por defecto:</strong> admin / 12345</li>
                    <li><strong>URL HTTP:</strong> http://192.168.1.100:8080</li>
                    <li><strong>URL RTSP:</strong> rtsp://admin:12345@192.168.1.100:554/stream1</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>
